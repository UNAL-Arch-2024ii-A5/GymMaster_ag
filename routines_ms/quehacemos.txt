Enfoque de uso de auth
ğŸ”¹ OpciÃ³n 1: AutenticaciÃ³n en el API Gateway
ğŸ“Œ El API Gateway valida el token ANTES de redirigir la solicitud a los MS.
ğŸ“Œ Los MS confÃ­an en el API Gateway y no vuelven a validar el token.
ğŸ“Œ Menos trÃ¡fico entre los MS, pero el API Gateway se convierte en un cuello de botella si recibe muchas solicitudes.

1ï¸âƒ£ Â¿CÃ³mo Funciona Este Enfoque?
1ï¸âƒ£ El cliente (frontend) envÃ­a una peticiÃ³n con el token al API Gateway.
2ï¸âƒ£ El API Gateway valida el token con auth_ms.
3ï¸âƒ£ Si el token es vÃ¡lido, el API Gateway agrega los datos del usuario en el context de GraphQL.
4ï¸âƒ£ Los resolvers de GraphQL ya reciben los datos del usuario, por lo que los MS NO necesitan validar autenticaciÃ³n.
5ï¸âƒ£ El API Gateway reenvÃ­a la solicitud con la informaciÃ³n del usuario a los MS.

ğŸ“Œ Resumen Final de Seguridad y AutenticaciÃ³n en routines_ms
Hemos configurado routines_ms para que dependa completamente del API Gateway para autenticaciÃ³n y permisos.

âœ… El API Gateway valida el token antes de reenviar solicitudes a routines_ms.
âœ… Los microservicios confÃ­an en el API Gateway y ya no validan autenticaciÃ³n por sÃ­ mismos.
âœ… Los roles (admin, coach, user) definen quÃ© acciones puede realizar cada usuario.

ğŸ“Œ 1ï¸âƒ£ Reglas de AutenticaciÃ³n y Permisos
AcciÃ³n	QuiÃ©n puede hacerla?	ValidaciÃ³n en queries.js o mutations.js?
Ver todos los ejercicios (allExercises)	Cualquier usuario autenticado	âœ… context.user requerido en queries.js
Ver un ejercicio (getExercise)	Cualquier usuario autenticado	âœ… context.user requerido en queries.js
Ver todas las rutinas (allRoutines)	Cualquier usuario autenticado	âœ… context.user requerido en queries.js
Ver una rutina (getRoutine)	Cualquier usuario autenticado	âœ… context.user requerido en queries.js
Crear un ejercicio (createExercise)	Solo admin y coach	âœ… `role === "admin"
Actualizar un ejercicio (updateExercise)	Solo admin y coach	âœ… `role === "admin"
Eliminar un ejercicio (deleteExercise)	Solo admin y coach	âœ… `role === "admin"
Crear una rutina (createRoutine)	Solo admin y coach	âœ… `role === "admin"
Actualizar una rutina (updateRoutine)	Solo admin y coach	âœ… `role === "admin"
Eliminar una rutina (deleteRoutine)	Solo admin y coach	âœ… `role === "admin"
Cambio	ExplicaciÃ³n
Los usuarios deben estar autenticados para ver ejercicios y rutinas.	Se verifica context.user en queries.js.
No se necesita verificar role en consultas.	Todos los usuarios autenticados pueden consultar.
Las mutaciones ya tienen verificaciÃ³n de role.	Solo admin y coach pueden modificar ejercicios y rutinas.
âœ… Â¡Ahora el MS de Rutinas exige autenticaciÃ³n para consultas y mantiene permisos en mutaciones! ğŸš€